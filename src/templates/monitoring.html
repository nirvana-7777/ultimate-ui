{% extends "base.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/monitoring.css') }}">

<div class="monitoring-container">
    <!-- ... rest of monitoring.html content ... -->
</div>

<!-- Import Details Modal -->
<div class="modal" id="import-details-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modal-title">Import-Details</h3>
            <button class="modal-close" aria-label="Modal schließen">×</button>
        </div>
        <div class="modal-body" id="import-details-content">
            <!-- Details will be loaded here -->
        </div>
    </div>
</div>

<!-- Fix the monitoring data - use simple attributes instead of JSON -->
<div id="monitoring-data"
     data-webepg-health="{{ 'true' if webepg_health else 'false' }}"
     data-config-path="{{ config_path|default('') }}"
     data-error="{{ error if error else '' }}">
</div>

<!-- Pass data via JavaScript object instead of JSON attributes -->
<script>
    // Make monitoring data available to JavaScript
    window.MONITORING_DATA = {
        config: {{ config|tojson|safe if config else '{}' }},
        webepg_health: {{ webepg_health|tojson|safe if webepg_health is not none else 'false' }},
        statistics: {{ statistics|tojson|safe if statistics else '{}' }},
        import_status: {{ import_status|tojson|safe if import_status else '{}' }},
        config_path: "{{ config_path|default('') }}",
        error: {{ error|tojson|safe if error else 'null' }}
    };
</script>
{% endblock %}